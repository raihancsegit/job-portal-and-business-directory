import{r as h,j as e,b as m,c as b,R as k}from"./index-BQE1JNve.js";const C=({activeTab:n,setActiveTab:a})=>e.jsxs("div",{className:"jpbd-admin-sidebar",children:[e.jsx("h2",{className:"jpbd-sidebar-title",children:"Settings"}),e.jsxs("ul",{children:[e.jsx("li",{className:n==="social_login"?"active":"",children:e.jsx("a",{href:"#social_login",onClick:r=>{r.preventDefault(),a("social_login")},children:"Social Login"})}),e.jsx("li",{className:n==="backgrounds"?"active":"",children:e.jsx("a",{href:"#backgrounds",onClick:r=>{r.preventDefault(),a("backgrounds")},children:"Page Backgrounds"})})]})]}),y=({settings:n,setSettings:a,handleSave:r})=>{const l=i=>{const{name:c,value:o,type:s,checked:t}=i.target;a(g=>({...g,[c]:s==="checkbox"?t:o}))},j=i=>{i.preventDefault(),r(n,"Social login settings saved successfully!")};return e.jsxs("div",{children:[e.jsx("h2",{children:"Social Login Settings"}),e.jsx("p",{children:"Configure Google and LinkedIn API keys here. Get your keys from their respective developer consoles."}),e.jsxs("form",{onSubmit:j,children:[e.jsx("h3",{className:"jpbd-settings-subtitle",children:"Google"}),e.jsx("table",{className:"form-table",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:"Enable Google Login"}),e.jsx("td",{children:e.jsxs("label",{htmlFor:"googleEnabled",children:[e.jsx("input",{type:"checkbox",id:"googleEnabled",name:"googleEnabled",checked:n.googleEnabled,onChange:l}),e.jsx("span",{children:"Yes"})]})})]}),n.googleEnabled&&e.jsxs(e.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:e.jsx("label",{htmlFor:"googleClientId",children:"Google Client ID"})}),e.jsxs("td",{children:[e.jsx("input",{type:"text",id:"googleClientId",name:"googleClientId",value:n.googleClientId,onChange:l,className:"regular-text",placeholder:"Enter your Google Client ID"}),e.jsxs("p",{className:"description",children:["You can get your Client ID from the ",e.jsx("a",{href:"https://console.cloud.google.com/apis/credentials",target:"_blank",rel:"noopener noreferrer",children:"Google Cloud Console"}),"."]})]})]}),e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:e.jsx("label",{htmlFor:"googleClientSecret",children:"Google Client Secret"})}),e.jsxs("td",{children:[e.jsx("input",{type:"password",id:"googleClientSecret",name:"googleClientSecret",value:n.googleClientSecret,onChange:l,className:"regular-text",placeholder:"Enter your Google Client Secret"}),e.jsxs("p",{className:"description",children:['Make sure to add the following URL to your "Authorized redirect URIs":',e.jsx("br",{}),e.jsx("code",{children:`${window.jpbd_admin_object.home_url}/wp-json/jpbd/v1/auth/google/callback`})]})]})]})]})]})}),e.jsx("h3",{className:"jpbd-settings-subtitle",children:"LinkedIn"}),e.jsx("table",{className:"form-table",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:"Enable LinkedIn Login"}),e.jsx("td",{children:e.jsxs("label",{htmlFor:"linkedinEnabled",children:[e.jsx("input",{type:"checkbox",id:"linkedinEnabled",name:"linkedinEnabled",checked:n.linkedinEnabled,onChange:l}),e.jsx("span",{children:"Yes"})]})})]}),n.linkedinEnabled&&e.jsxs(e.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:e.jsx("label",{htmlFor:"linkedinClientId",children:"LinkedIn Client ID"})}),e.jsxs("td",{children:[e.jsx("input",{type:"text",id:"linkedinClientId",name:"linkedinClientId",value:n.linkedinClientId,onChange:l,className:"regular-text",placeholder:"Enter your LinkedIn Client ID"}),e.jsxs("p",{className:"description",children:["You can get your Client ID from the ",e.jsx("a",{href:"https://www.linkedin.com/developers/apps",target:"_blank",rel:"noopener noreferrer",children:"LinkedIn Developer Portal"}),"."]})]})]}),e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:e.jsx("label",{htmlFor:"linkedinClientSecret",children:"LinkedIn Client Secret"})}),e.jsxs("td",{children:[e.jsx("input",{type:"password",id:"linkedinClientSecret",name:"linkedinClientSecret",value:n.linkedinClientSecret,onChange:l,className:"regular-text",placeholder:"Enter your LinkedIn Client Secret"}),e.jsxs("p",{className:"description",children:['Make sure to add the following URL to your "Authorized redirect URIs":',e.jsx("br",{}),e.jsx("code",{children:`${window.jpbd_admin_object.home_url}/wp-json/jpbd/v1/auth/linkedin/callback`})]})]})]})]})]})}),e.jsx("p",{className:"submit",children:e.jsx("button",{type:"submit",className:"button button-primary",children:"Save Social Login Settings"})})]})]})},S=({settings:n,setSettings:a,handleSave:r})=>{const[l,j]=h.useState("login"),i=t=>{const{name:g,value:u}=t.target;a(d=>({...d,[g]:u}))},c=t=>{t.preventDefault(),r(n,"Background settings saved successfully!")},o={login:{title:"Login Page",image:"loginBgImage",color:"loginBgColor"},signup:{title:"Signup Page",image:"signupBgImage",color:"signupBgColor"},forgot:{title:"Forget Password Page",image:"forgotBgImage",color:"forgotBgColor"}},s=o[l];return e.jsxs("div",{children:[e.jsx("h2",{children:"Page Background Settings"}),e.jsx("p",{children:"Upload or set colors for Login, Signup, and Forget Password pages."}),e.jsx("div",{className:"jpbd-subnav-wrapper",children:Object.keys(o).map(t=>e.jsx("button",{className:`jpbd-subnav-tab ${l===t?"active":""}`,onClick:()=>j(t),children:o[t].title},t))}),e.jsxs("form",{onSubmit:c,children:[e.jsx("table",{className:"form-table",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:e.jsxs("label",{htmlFor:s.image,children:[s.title," Background Image"]})}),e.jsxs("td",{children:[e.jsx("input",{type:"text",id:s.image,name:s.image,value:n[s.image],onChange:i,className:"regular-text",placeholder:"Enter image URL or use media library"}),e.jsx("button",{type:"button",className:"button",children:"Upload Image"})]})]}),e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:e.jsxs("label",{htmlFor:s.color,children:[s.title," Background Color"]})}),e.jsx("td",{children:e.jsx("input",{type:"color",id:s.color,name:s.color,value:n[s.color],onChange:i,className:"jpbd-color-picker"})})]})]})}),e.jsx("p",{className:"submit",children:e.jsx("button",{type:"submit",className:"button button-primary",children:"Save Background Settings"})})]})]})};function f(){const[n,a]=h.useState("social_login"),[r,l]=h.useState(null),[j,i]=h.useState(!0),[c,o]=h.useState({message:"",type:""}),{api_url:s,nonce:t}=window.jpbd_admin_object||{};h.useEffect(()=>{(async()=>{if(!t){console.error("Nonce is missing. Cannot fetch settings."),o({message:"Error: Security token is missing.",type:"error"}),i(!1);return}i(!0);try{const d=await m.get(`${s}settings`,{headers:{"X-WP-Nonce":t}});l(d.data)}catch(d){console.error("Failed to fetch settings:",d),o({message:"Error: Could not load settings.",type:"error"})}finally{i(!1)}})()},[]);const g=async(u,d)=>{if(!t){console.error("Nonce is missing. Cannot save settings."),o({message:"Error: Security token is missing.",type:"error"});return}o({message:"Saving...",type:"info"});try{await m.post(`${s}settings`,u,{headers:{"X-WP-Nonce":t}}),o({message:d,type:"success"})}catch(x){console.error("Failed to save settings:",x),o({message:"Error: Could not save settings.",type:"error"})}setTimeout(()=>o({message:"",type:""}),4e3)};return j?e.jsx("div",{className:"wrap",children:e.jsx("h1",{children:"Loading Settings..."})}):e.jsxs("div",{className:"wrap jpbd-admin-wrap",children:[e.jsx("h1",{children:"Job Portal & Business Directory"}),c.message&&e.jsx("div",{className:`notice is-dismissible notice-${c.type}`,children:e.jsx("p",{children:c.message})}),e.jsxs("div",{className:"jpbd-admin-layout",children:[e.jsx(C,{activeTab:n,setActiveTab:a}),e.jsxs("div",{className:"jpbd-admin-content",children:[r&&n==="social_login"&&e.jsx(y,{settings:r,setSettings:l,handleSave:g}),r&&n==="backgrounds"&&e.jsx(S,{settings:r,setSettings:l,handleSave:g})]})]})]})}const p=document.getElementById("jpbd-settings-app");p&&b.createRoot(p).render(e.jsx(k.StrictMode,{children:e.jsx(f,{})}));
