import{r as h,j as e,a as j,R as b,b as S}from"./index-BvHU-Na7.js";const k=({activeTab:n,setActiveTab:a})=>e.jsxs("div",{className:"jpbd-admin-sidebar",children:[e.jsx("h2",{className:"jpbd-sidebar-title",children:"Settings"}),e.jsxs("ul",{children:[e.jsx("li",{className:n==="social_login"?"active":"",children:e.jsx("a",{href:"#social_login",onClick:r=>{r.preventDefault(),a("social_login")},children:"Social Login"})}),e.jsx("li",{className:n==="backgrounds"?"active":"",children:e.jsx("a",{href:"#backgrounds",onClick:r=>{r.preventDefault(),a("backgrounds")},children:"Page Backgrounds"})})]})]}),C=({settings:n,setSettings:a,handleSave:r})=>{const l=o=>{const{name:c,value:i,type:s,checked:t}=o.target;a(g=>({...g,[c]:s==="checkbox"?t:i}))},m=o=>{o.preventDefault(),r(n,"Social login settings saved successfully!")};return e.jsxs("div",{children:[e.jsx("h2",{children:"Social Login Settings"}),e.jsx("p",{children:"Configure Google and LinkedIn API keys here. Get your keys from their respective developer consoles."}),e.jsxs("form",{onSubmit:m,children:[e.jsx("h3",{className:"jpbd-settings-subtitle",children:"Google"}),e.jsx("table",{className:"form-table",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:"Enable Google Login"}),e.jsx("td",{children:e.jsxs("label",{htmlFor:"googleEnabled",children:[e.jsx("input",{type:"checkbox",id:"googleEnabled",name:"googleEnabled",checked:n.googleEnabled,onChange:l}),e.jsx("span",{children:"Yes"})]})})]}),n.googleEnabled&&e.jsxs(e.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:e.jsx("label",{htmlFor:"googleClientId",children:"Google Client ID"})}),e.jsx("td",{children:e.jsx("input",{type:"text",id:"googleClientId",name:"googleClientId",value:n.googleClientId,onChange:l,className:"regular-text",placeholder:"Enter your Google Client ID"})})]}),e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:e.jsx("label",{htmlFor:"googleClientSecret",children:"Google Client Secret"})}),e.jsx("td",{children:e.jsx("input",{type:"password",id:"googleClientSecret",name:"googleClientSecret",value:n.googleClientSecret,onChange:l,className:"regular-text",placeholder:"Enter your Google Client Secret"})})]})]})]})}),e.jsx("h3",{className:"jpbd-settings-subtitle",children:"LinkedIn"}),e.jsx("table",{className:"form-table",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:"Enable LinkedIn Login"}),e.jsx("td",{children:e.jsxs("label",{htmlFor:"linkedinEnabled",children:[e.jsx("input",{type:"checkbox",id:"linkedinEnabled",name:"linkedinEnabled",checked:n.linkedinEnabled,onChange:l}),e.jsx("span",{children:"Yes"})]})})]}),n.linkedinEnabled&&e.jsxs(e.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:e.jsx("label",{htmlFor:"linkedinClientId",children:"LinkedIn Client ID"})}),e.jsx("td",{children:e.jsx("input",{type:"text",id:"linkedinClientId",name:"linkedinClientId",value:n.linkedinClientId,onChange:l,className:"regular-text",placeholder:"Enter your LinkedIn Client ID"})})]}),e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:e.jsx("label",{htmlFor:"linkedinClientSecret",children:"LinkedIn Client Secret"})}),e.jsx("td",{children:e.jsx("input",{type:"password",id:"linkedinClientSecret",name:"linkedinClientSecret",value:n.linkedinClientSecret,onChange:l,className:"regular-text",placeholder:"Enter your LinkedIn Client Secret"})})]})]})]})}),e.jsx("p",{className:"submit",children:e.jsx("button",{type:"submit",className:"button button-primary",children:"Save Social Login Settings"})})]})]})},y=({settings:n,setSettings:a,handleSave:r})=>{const[l,m]=h.useState("login"),o=t=>{const{name:g,value:u}=t.target;a(d=>({...d,[g]:u}))},c=t=>{t.preventDefault(),r(n,"Background settings saved successfully!")},i={login:{title:"Login Page",image:"loginBgImage",color:"loginBgColor"},signup:{title:"Signup Page",image:"signupBgImage",color:"signupBgColor"},forgot:{title:"Forget Password Page",image:"forgotBgImage",color:"forgotBgColor"}},s=i[l];return e.jsxs("div",{children:[e.jsx("h2",{children:"Page Background Settings"}),e.jsx("p",{children:"Upload or set colors for Login, Signup, and Forget Password pages."}),e.jsx("div",{className:"jpbd-subnav-wrapper",children:Object.keys(i).map(t=>e.jsx("button",{className:`jpbd-subnav-tab ${l===t?"active":""}`,onClick:()=>m(t),children:i[t].title},t))}),e.jsxs("form",{onSubmit:c,children:[e.jsx("table",{className:"form-table",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:e.jsxs("label",{htmlFor:s.image,children:[s.title," Background Image"]})}),e.jsxs("td",{children:[e.jsx("input",{type:"text",id:s.image,name:s.image,value:n[s.image],onChange:o,className:"regular-text",placeholder:"Enter image URL or use media library"}),e.jsx("button",{type:"button",className:"button",children:"Upload Image"})]})]}),e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:e.jsxs("label",{htmlFor:s.color,children:[s.title," Background Color"]})}),e.jsx("td",{children:e.jsx("input",{type:"color",id:s.color,name:s.color,value:n[s.color],onChange:o,className:"jpbd-color-picker"})})]})]})}),e.jsx("p",{className:"submit",children:e.jsx("button",{type:"submit",className:"button button-primary",children:"Save Background Settings"})})]})]})};function v(){const[n,a]=h.useState("social_login"),[r,l]=h.useState(null),[m,o]=h.useState(!0),[c,i]=h.useState({message:"",type:""}),{api_url:s,nonce:t}=window.jpbd_admin_object||{};h.useEffect(()=>{(async()=>{if(!t){console.error("Nonce is missing. Cannot fetch settings."),i({message:"Error: Security token is missing.",type:"error"}),o(!1);return}o(!0);try{const d=await j.get(`${s}settings`,{headers:{"X-WP-Nonce":t}});l(d.data)}catch(d){console.error("Failed to fetch settings:",d),i({message:"Error: Could not load settings.",type:"error"})}finally{o(!1)}})()},[]);const g=async(u,d)=>{if(!t){console.error("Nonce is missing. Cannot save settings."),i({message:"Error: Security token is missing.",type:"error"});return}i({message:"Saving...",type:"info"});try{await j.post(`${s}settings`,u,{headers:{"X-WP-Nonce":t}}),i({message:d,type:"success"})}catch(p){console.error("Failed to save settings:",p),i({message:"Error: Could not save settings.",type:"error"})}setTimeout(()=>i({message:"",type:""}),4e3)};return m?e.jsx("div",{className:"wrap",children:e.jsx("h1",{children:"Loading Settings..."})}):e.jsxs("div",{className:"wrap jpbd-admin-wrap",children:[e.jsx("h1",{children:"Job Portal & Business Directory"}),c.message&&e.jsx("div",{className:`notice is-dismissible notice-${c.type}`,children:e.jsx("p",{children:c.message})}),e.jsxs("div",{className:"jpbd-admin-layout",children:[e.jsx(k,{activeTab:n,setActiveTab:a}),e.jsxs("div",{className:"jpbd-admin-content",children:[r&&n==="social_login"&&e.jsx(C,{settings:r,setSettings:l,handleSave:g}),r&&n==="backgrounds"&&e.jsx(y,{settings:r,setSettings:l,handleSave:g})]})]})]})}const x=document.getElementById("jpbd-settings-app");x&&b.createRoot(x).render(e.jsx(S.StrictMode,{children:e.jsx(v,{})}));
