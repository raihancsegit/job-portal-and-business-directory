import{r as h,j as e,a as x,R as u,b}from"./index-BTP33w5r.js";const S=({activeTab:n,setActiveTab:c})=>e.jsxs("div",{className:"jpbd-admin-sidebar",children:[e.jsx("h2",{className:"jpbd-sidebar-title",children:"Settings"}),e.jsxs("ul",{children:[e.jsx("li",{className:n==="social_login"?"active":"",children:e.jsx("a",{href:"#social_login",onClick:o=>{o.preventDefault(),c("social_login")},children:"Social Login"})}),e.jsx("li",{className:n==="backgrounds"?"active":"",children:e.jsx("a",{href:"#backgrounds",onClick:o=>{o.preventDefault(),c("backgrounds")},children:"Page Backgrounds"})})]})]}),k=({settings:n,setSettings:c,handleSave:o})=>{const t=r=>{const{name:d,value:i,type:s,checked:l}=r.target;c(a=>({...a,[d]:s==="checkbox"?l:i}))},j=r=>{r.preventDefault(),o(n,"Social login settings saved successfully!")};return e.jsxs("div",{children:[e.jsx("h2",{children:"Social Login Settings"}),e.jsx("p",{children:"Configure Google and LinkedIn API keys here. Get your keys from their respective developer consoles."}),e.jsxs("form",{onSubmit:j,children:[e.jsx("h3",{className:"jpbd-settings-subtitle",children:"Google"}),e.jsx("table",{className:"form-table",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:"Enable Google Login"}),e.jsx("td",{children:e.jsxs("label",{htmlFor:"googleEnabled",children:[e.jsx("input",{type:"checkbox",id:"googleEnabled",name:"googleEnabled",checked:n.googleEnabled,onChange:t}),e.jsx("span",{children:"Yes"})]})})]}),n.googleEnabled&&e.jsxs(e.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:e.jsx("label",{htmlFor:"googleClientId",children:"Google Client ID"})}),e.jsx("td",{children:e.jsx("input",{type:"text",id:"googleClientId",name:"googleClientId",value:n.googleClientId,onChange:t,className:"regular-text",placeholder:"Enter your Google Client ID"})})]}),e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:e.jsx("label",{htmlFor:"googleClientSecret",children:"Google Client Secret"})}),e.jsx("td",{children:e.jsx("input",{type:"password",id:"googleClientSecret",name:"googleClientSecret",value:n.googleClientSecret,onChange:t,className:"regular-text",placeholder:"Enter your Google Client Secret"})})]})]})]})}),e.jsx("h3",{className:"jpbd-settings-subtitle",children:"LinkedIn"}),e.jsx("table",{className:"form-table",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:"Enable LinkedIn Login"}),e.jsx("td",{children:e.jsxs("label",{htmlFor:"linkedinEnabled",children:[e.jsx("input",{type:"checkbox",id:"linkedinEnabled",name:"linkedinEnabled",checked:n.linkedinEnabled,onChange:t}),e.jsx("span",{children:"Yes"})]})})]}),n.linkedinEnabled&&e.jsxs(e.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:e.jsx("label",{htmlFor:"linkedinClientId",children:"LinkedIn Client ID"})}),e.jsx("td",{children:e.jsx("input",{type:"text",id:"linkedinClientId",name:"linkedinClientId",value:n.linkedinClientId,onChange:t,className:"regular-text",placeholder:"Enter your LinkedIn Client ID"})})]}),e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:e.jsx("label",{htmlFor:"linkedinClientSecret",children:"LinkedIn Client Secret"})}),e.jsx("td",{children:e.jsx("input",{type:"password",id:"linkedinClientSecret",name:"linkedinClientSecret",value:n.linkedinClientSecret,onChange:t,className:"regular-text",placeholder:"Enter your LinkedIn Client Secret"})})]})]})]})}),e.jsx("p",{className:"submit",children:e.jsx("button",{type:"submit",className:"button button-primary",children:"Save Social Login Settings"})})]})]})},C=({settings:n,setSettings:c,handleSave:o})=>{const[t,j]=h.useState("login"),r=l=>{const{name:a,value:g}=l.target;c(m=>({...m,[a]:g}))},d=l=>{l.preventDefault(),o(n,"Background settings saved successfully!")},i={login:{title:"Login Page",image:"loginBgImage",color:"loginBgColor"},signup:{title:"Signup Page",image:"signupBgImage",color:"signupBgColor"},forgot:{title:"Forget Password Page",image:"forgotBgImage",color:"forgotBgColor"}},s=i[t];return e.jsxs("div",{children:[e.jsx("h2",{children:"Page Background Settings"}),e.jsx("p",{children:"Upload or set colors for Login, Signup, and Forget Password pages."}),e.jsx("div",{className:"jpbd-subnav-wrapper",children:Object.keys(i).map(l=>e.jsx("button",{className:`jpbd-subnav-tab ${t===l?"active":""}`,onClick:()=>j(l),children:i[l].title},l))}),e.jsxs("form",{onSubmit:d,children:[e.jsx("table",{className:"form-table",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:e.jsxs("label",{htmlFor:s.image,children:[s.title," Background Image"]})}),e.jsxs("td",{children:[e.jsx("input",{type:"text",id:s.image,name:s.image,value:n[s.image],onChange:r,className:"regular-text",placeholder:"Enter image URL or use media library"}),e.jsx("button",{type:"button",className:"button",children:"Upload Image"})]})]}),e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:e.jsxs("label",{htmlFor:s.color,children:[s.title," Background Color"]})}),e.jsx("td",{children:e.jsx("input",{type:"color",id:s.color,name:s.color,value:n[s.color],onChange:r,className:"jpbd-color-picker"})})]})]})}),e.jsx("p",{className:"submit",children:e.jsx("button",{type:"submit",className:"button button-primary",children:"Save Background Settings"})})]})]})};function v(){const[n,c]=h.useState("social_login"),[o,t]=h.useState({}),[j,r]=h.useState(!0),[d,i]=h.useState({message:"",type:""});h.useEffect(()=>{(async()=>{r(!0);try{const a=window.wpApiSettings?.nonce||"",g=await x.get("/wp-json/jpbd/v1/settings",{headers:{"X-WP-Nonce":a}});t(g.data)}catch(a){console.error("Failed to fetch settings:",a),i({message:"Error: Could not load settings. Check console for details.",type:"error"})}finally{r(!1)}})()},[]);const s=async(l,a)=>{i({message:"Saving...",type:"info"});try{const g=window.wpApiSettings?.nonce||"";await x.post("/wp-json/jpbd/v1/settings",l,{headers:{"X-WP-Nonce":g}}),i({message:a,type:"success"})}catch(g){console.error("Failed to save settings:",g),i({message:"Error: Could not save settings.",type:"error"})}setTimeout(()=>i({message:"",type:""}),4e3)};return j?e.jsx("div",{className:"wrap jpbd-admin-wrap",children:e.jsx("h1",{children:"Loading Settings..."})}):e.jsxs("div",{className:"wrap jpbd-admin-wrap",children:[e.jsx("h1",{children:"Job Portal & Business Directory"}),d.message&&e.jsx("div",{className:`notice is-dismissible notice-${d.type}`,children:e.jsx("p",{children:d.message})}),e.jsxs("div",{className:"jpbd-admin-layout",children:[e.jsx(S,{activeTab:n,setActiveTab:c}),e.jsxs("div",{className:"jpbd-admin-content",children:[n==="social_login"&&e.jsx(k,{settings:o,setSettings:t,handleSave:s}),n==="backgrounds"&&e.jsx(C,{settings:o,setSettings:t,handleSave:s})]})]})]})}const p=document.getElementById("jpbd-settings-app");p&&u.createRoot(p).render(e.jsx(b.StrictMode,{children:e.jsx(v,{})}));
